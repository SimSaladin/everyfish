<html>
   <head>
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
      <script src="https://code.createjs.com/createjs-2015.05.21.min.js"></script>
      <script>
var Simple1DNoise = function() {
    var MAX_VERTICES = 256;
    var MAX_VERTICES_MASK = MAX_VERTICES -1;
    var amplitude = 1;
    var scale = 1;

    var r = [];

    for ( var i = 0; i < MAX_VERTICES; ++i ) {
        r.push(Math.random());
    }

    var getVal = function( x ){
        var scaledX = x * scale;
        var xFloor = Math.floor(scaledX);
        var t = scaledX - xFloor;
        var tRemapSmoothstep = t * t * ( 3 - 2 * t );

        /// Modulo using &
        var xMin = xFloor & MAX_VERTICES_MASK;
        var xMax = ( xMin + 1 ) & MAX_VERTICES_MASK;

        var y = lerp( r[ xMin ], r[ xMax ], tRemapSmoothstep );

        return y * amplitude;
    };

    /**
    * Linear interpolation function.
    * @param a The lower integer value
    * @param b The upper integer value
    * @param t The value between the two
    * @returns {number}
    */
    var lerp = function(a, b, t ) {
        return a * ( 1 - t ) + b * t;
    };

    // return the API
    return {
        getVal: getVal,
        setAmplitude: function(newAmplitude) {
            amplitude = newAmplitude;
        },
        setScale: function(newScale) {
            scale = newScale;
        }
    };
};

function drawRoundSplat(stage, centerX, centerY, color) {
  var curve = new createjs.Shape();
  curve.graphics.beginStroke(color);
  curve.graphics.beginFill(color);


  var noise = new Simple1DNoise();


  noise.setAmplitude(25);          // spike variation measure
  var baseCircleRadius = 25;  // minimum radius 
  var spikeMultiplier = 5;  // larger value creates spikes with higher probability
  var sharpnessScale = 1.0 / 7; // spike length multiplier
  var resolution = 100; // number of line segments

  // circle center coordinates
  var x0 = centerX;
  var y0 = centerY;


  var sin = Math.sin, cos = Math.cos;

  // begin point, invert y axis
  curve.graphics.moveTo(x0, y0 - baseCircleRadius - noise.getVal(0));

  for (var i = 0 ; i < resolution; i++) {
    var theta = Math.PI * 2 * i / resolution;

    var amplitude = noise.getVal(theta * spikeMultiplier);

    amplitude = baseCircleRadius + amplitude * amplitude * sharpnessScale; // sharper spikes with some shrinking?

    // inverted y-axis, y grows up
    curve.graphics.lineTo( x0 + sin(theta) * amplitude, y0 - cos(theta) * amplitude );
  }

  stage.addChild(curve);
  stage.update();
}



function init() {
  var stage = new createjs.Stage("main");
  drawRoundSplat(stage, 200, 200, "red");
}
      </script>
   </head>
   <body onload="init();">
      <canvas id="main" width="600" height="500"></canvas>
   </body>
</html>
